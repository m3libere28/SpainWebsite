<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Valencia Journey</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <!-- Splide.js for carousels -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/css/splide.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/js/splide.min.js"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- FullCalendar -->
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js"></script>
    <!-- Leaflet.js -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        :root {
            --primary: #4A6FA5;    /* Mediterranean Blue */
            --secondary: #F18F01;  /* Valencia Orange */
            --accent: #48A9A6;     /* Teal */
            --neutral: #F5F5F5;    /* Light Gray */
            --dark: #2B2D42;       /* Navy */
            --light: #F8F9FA;      /* Off White */
        }
        body {
            font-family: 'Open Sans', sans-serif;
            background: var(--neutral);
            margin: 0;
            padding: 0;
            color: var(--dark);
        }
        h1, h2, h3, h4 {
            font-family: 'Montserrat', sans-serif;
        }
        #loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s;
        }
        #loader.fade-out { opacity: 0; pointer-events: none; }
        .loader-text {
            color: white;
            font-size: 2.5rem;
            font-family: 'Montserrat', sans-serif;
            margin-bottom: 2rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        .loader-plane { 
            font-size: 5rem; 
            color: white; 
            position: relative;
            animation: flyAcross 2s infinite ease-in-out; 
        }
        .loader-trail {
            position: absolute;
            width: 100px;
            height: 10px;
            background: rgba(255,255,255,0.3);
            border-radius: 50%;
            filter: blur(5px);
            animation: trailFade 2s infinite ease-in-out;
        }
        @keyframes flyAcross { 
            0% { transform: translateX(-100vw) rotate(-10deg); } 
            50% { transform: translateX(0) rotate(10deg); } 
            100% { transform: translateX(100vw) rotate(-10deg); } 
        }
        @keyframes trailFade {
            0%, 100% { opacity: 0; width: 0; }
            50% { opacity: 0.5; width: 100px; }
        }
        #countdown-bar {
            position: fixed;
            top: 0;
            width: 100%;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            color: white;
            padding: 1rem;
            text-align: center;
            z-index: 20;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            font-family: 'Montserrat', sans-serif;
        }
        .countdown-container { 
            display: flex; 
            justify-content: center; 
            gap: 20px; 
            font-size: 1.2rem;
            flex-wrap: wrap;
        }
        .countdown-unit { 
            background: rgba(255, 255, 255, 0.2); 
            padding: 12px; 
            border-radius: 10px; 
            min-width: 80px; 
            display: flex; 
            flex-direction: column; 
            justify-content: center; 
            align-items: center; 
            transition: all 0.3s;
        }
        .countdown-unit span:first-child {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .countdown-unit:hover { 
            transform: translateY(-5px); 
            background: var(--secondary); 
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        #hero {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            color: white;
            position: relative;
            margin-top: 80px; /* Offset for countdown bar */
            overflow: hidden;
        }
        #hero-video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: 0;
        }
        #hero::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.4);
            z-index: 1;
        }
        #hero h1, #hero p, #hero button { position: relative; z-index: 2; }
        #hero h1 {
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        nav {
            position: sticky;
            top: 80px; /* Below countdown bar */
            background: rgba(74, 111, 165, 0.95);
            padding: 1rem;
            z-index: 10;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(5px);
        }
        nav a {
            transition: all 0.3s;
        }
        nav a:hover {
            color: var(--secondary);
            transform: translateY(-2px);
        }
        .card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            padding: 2rem;
            margin: 1rem auto;
            transition: all 0.3s;
            border: 1px solid rgba(0,0,0,0.05);
        }
        .card:hover { 
            transform: translateY(-5px); 
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
        }
        .btn {
            background: var(--secondary);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 30px;
            transition: all 0.3s;
            font-weight: 600;
            border: none;
            cursor: pointer;
            font-family: 'Montserrat', sans-serif;
        }
        .btn:hover { 
            background: var(--primary); 
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .weather-visual { 
            position: relative; 
            width: 100%; 
            height: 250px; 
            background: linear-gradient(135deg, var(--primary), var(--accent));
            border-radius: 10px; 
            overflow: hidden; 
        }
        .weather-sun { 
            position: absolute; 
            top: 20px; 
            left: 20px; 
            font-size: 3rem; 
            color: var(--secondary); 
            animation: pulse 2s infinite; 
        }
        .weather-cloud { 
            position: absolute; 
            top: 50px; 
            left: 100px; 
            font-size: 2rem; 
            color: white; 
            animation: drift 15s infinite linear; 
        }
        @keyframes pulse { 
            0%, 100% { transform: scale(1); } 
            50% { transform: scale(1.2); } 
        }
        @keyframes drift { 
            0% { transform: translateX(-50px); } 
            100% { transform: translateX(calc(100vw + 50px)); } 
        }
        .timeline-container { overflow-x: auto; padding: 20px 0; }
        .timeline { 
            display: flex; 
            align-items: center; 
            position: relative; 
            height: 200px; 
            background: linear-gradient(90deg, var(--primary), var(--accent));
            border-radius: 10px; 
            padding: 20px; 
            min-width: 1200px;
        }
        .timeline-item { 
            position: relative; 
            flex: 1; 
            text-align: center; 
            color: white; 
            transition: all 0.3s; 
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            padding-bottom: 20px;
        }
        .timeline-item:hover { transform: scale(1.1); }
        .timeline-dot { 
            width: 20px; 
            height: 20px; 
            background: var(--secondary); 
            border-radius: 50%; 
            position: absolute; 
            top: -30px; 
            left: 50%; 
            transform: translateX(-50%); 
            animation: glow 1.5s infinite alternate; 
        }
        .timeline-item p { 
            margin-top: 40px; 
            font-size: 0.9rem; 
            line-height: 1.3;
        }
        @keyframes glow { 
            0% { box-shadow: 0 0 5px var(--secondary); } 
            100% { box-shadow: 0 0 15px var(--secondary); } 
        }
        .todo-item { 
            display: flex; 
            align-items: center; 
            padding: 12px 15px; 
            margin: 8px 0; 
            background: white; 
            border-radius: 8px; 
            cursor: pointer; 
            transition: all 0.3s;
            border-left: 4px solid var(--accent);
        }
        .todo-item.completed { 
            background: #e8f4f4; 
            text-decoration: line-through;
            color: #888;
            border-left-color: var(--secondary);
        }
        .todo-item:hover { 
            transform: translateX(5px); 
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
        }
        .todo-check { 
            margin-right: 12px; 
            color: var(--accent);
        }
        .todo-item.completed .todo-check {
            color: var(--secondary);
        }
        #map { 
            height: 500px; 
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .fade-in { 
            animation: fadeIn 1s ease-in; 
        }
        @keyframes fadeIn { 
            from { opacity: 0; transform: translateY(20px); } 
            to { opacity: 1; transform: translateY(0); } 
        }
        footer {
            background: linear-gradient(90deg, var(--primary), var(--dark));
        }
        .rental-card img {
            transition: transform 0.3s;
        }
        .rental-card:hover img {
            transform: scale(1.03);
        }
        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 100;
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background: white;
            border-radius: 15px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 2rem;
            position: relative;
            animation: modalFadeIn 0.3s ease-out;
        }
        @keyframes modalFadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--dark);
            transition: color 0.3s;
        }
        .close-modal:hover {
            color: var(--secondary);
        }
        /* Splide carousel customizations */
        .splide__arrow {
            background: var(--primary);
            opacity: 1;
        }
        .splide__arrow:hover {
            background: var(--secondary);
        }
        .splide__pagination__page.is-active {
            background: var(--secondary);
        }
        .splide__pagination__page {
            background: var(--primary);
            opacity: 0.5;
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loader">
        <div class="loader-text">Our Family Adventure</div>
        <i class="fas fa-plane loader-plane"></i>
        <div class="loader-trail"></div>
    </div>

    <!-- Countdown Timer (Top Bar) -->
    <div id="countdown-bar">
        <div class="countdown-container" id="countdown-timer">
            <div class="countdown-unit"><span id="days">0</span><span>Days</span></div>
            <div class="countdown-unit"><span id="hours">0</span><span>Hours</span></div>
            <div class="countdown-unit"><span id="minutes">0</span><span>Minutes</span></div>
            <div class="countdown-unit"><span id="seconds">0</span><span>Seconds</span></div>
        </div>
    </div>

    <!-- Hero Video -->
    <section id="hero">
        <video id="hero-video" autoplay muted loop>
            <source src="dji_mimo_20241215_033400_0_1735061722201_slowmotion.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        <h1 class="text-5xl md:text-6xl font-bold fade-in">Our Valencia Journey</h1>
        <p class="text-xl md:text-2xl mt-4 fade-in">A Family's Move to Spain's Mediterranean Gem</p>
        <button class="btn mt-6 fade-in" onclick="document.getElementById('home').scrollIntoView({ behavior: 'smooth' })">Begin the Adventure</button>
    </section>

    <!-- Navigation -->
    <nav class="flex flex-wrap justify-center gap-6 text-white">
        <a href="#home" class="hover:text-[var(--accent)]"><i class="fas fa-home mr-1"></i>Home</a>
        <a href="#rentals" class="hover:text-[var(--accent)]"><i class="fas fa-house-user mr-1"></i>Rentals</a>
        <a href="#timeline" class="hover:text-[var(--accent)]"><i class="fas fa-stream mr-1"></i>Timeline</a>
        <a href="#weather" class="hover:text-[var(--accent)]"><i class="fas fa-cloud-sun mr-1"></i>Weather</a>
        <a href="#schools" class="hover:text-[var(--accent)]"><i class="fas fa-school mr-1"></i>Schools</a>
        <a href="#budget" class="hover:text-[var(--accent)]"><i class="fas fa-wallet mr-1"></i>Budget</a>
        <a href="#todo" class="hover:text-[var(--accent)]"><i class="fas fa-tasks mr-1"></i>To-Do</a>
        <a href="#calendar" class="hover:text-[var(--accent)]"><i class="fas fa-calendar mr-1"></i>Calendar</a>
        <a href="#map" class="hover:text-[var(--accent)]"><i class="fas fa-map mr-1"></i>Map</a>
    </nav>

    <!-- Homepage -->
    <section id="home" class="max-w-6xl mx-auto py-8 px-4">
        <div class="card fade-in">
            <h2 class="text-2xl font-bold text-[var(--primary)]"><i class="fas fa-sun mr-2"></i>Welcome!</h2>
            <p class="mt-2">Join us as we prepare to move to Valencia in July 2026!</p>
        </div>
    </section>

    <!-- Rentals Carousel -->
    <section id="rentals" class="max-w-6xl mx-auto py-8 px-4">
        <div class="card fade-in">
            <h2 class="text-2xl font-bold text-[var(--primary)]"><i class="fas fa-house-user mr-2"></i>Beach Apartments</h2>
            <div class="splide mt-4" id="rentals-carousel">
                <div class="splide__track">
                    <ul class="splide__list">
                        <!-- Rental Item 1 -->
                        <li class="splide__slide">
                            <div class="rental-card card overflow-hidden cursor-pointer" onclick="showRentalModal(1)">
                                <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" alt="Malvarrosa" class="w-full h-48 object-cover rounded-t-lg">
                                <div class="p-4">
                                    <h3 class="font-bold text-lg">3-Bed, Malvarrosa</h3>
                                    <p class="text-[var(--primary)] font-semibold">$1,500/month</p>
                                    <p class="text-sm mt-2">Beautiful beachfront apartment with balcony</p>
                                    <button class="btn mt-4 w-full">View Details</button>
                                </div>
                            </div>
                        </li>
                        <!-- Rental Item 2 -->
                        <li class="splide__slide">
                            <div class="rental-card card overflow-hidden cursor-pointer" onclick="showRentalModal(2)">
                                <img src="https://images.unsplash.com/photo-1568605114967-8130f3a36994?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" alt="Cabanyal" class="w-full h-48 object-cover rounded-t-lg">
                                <div class="p-4">
                                    <h3 class="font-bold text-lg">2-Bed, Cabanyal</h3>
                                    <p class="text-[var(--primary)] font-semibold">$1,300/month</p>
                                    <p class="text-sm mt-2">Traditional fisherman's quarter, fully renovated</p>
                                    <button class="btn mt-4 w-full">View Details</button>
                                </div>
                            </div>
                        </li>
                        <!-- Rental Item 3 -->
                        <li class="splide__slide">
                            <div class="rental-card card overflow-hidden cursor-pointer" onclick="showRentalModal(3)">
                                <img src="https://images.unsplash.com/photo-1513584684374-8bab748fbf7f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" alt="Patacona" class="w-full h-48 object-cover rounded-t-lg">
                                <div class="p-4">
                                    <h3 class="font-bold text-lg">3-Bed, Patacona</h3>
                                    <p class="text-[var(--primary)] font-semibold">$1,700/month</p>
                                    <p class="text-sm mt-2">Spacious modern apartment near the beach</p>
                                    <button class="btn mt-4 w-full">View Details</button>
                                </div>
                            </div>
                        </li>
                        <!-- Additional rental items would follow the same pattern -->
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Horizontal Interactive Timeline -->
    <section id="timeline" class="max-w-6xl mx-auto py-8 px-4">
        <div class="card fade-in">
            <h2 class="text-2xl font-bold text-[var(--primary)]"><i class="fas fa-stream mr-2"></i>Preparation Timeline</h2>
            <div class="timeline-container">
                <div class="timeline">
                    <div class="timeline-item"><div class="timeline-dot"></div><p>July 2025<br>Research NLV</p></div>
                    <div class="timeline-item"><div class="timeline-dot"></div><p>Sept 2025<br>Income Proof</p></div>
                    <div class="timeline-item"><div class="timeline-dot"></div><p>Oct 2025<br>Health Insurance</p></div>
                    <div class="timeline-item"><div class="timeline-dot"></div><p>Nov 2025<br>BBVA Account</p></div>
                    <div class="timeline-item"><div class="timeline-dot"></div><p>Dec 2025<br>Consulate Appt</p></div>
                    <div class="timeline-item"><div class="timeline-dot"></div><p>Jan 2026<br>Apply NLV</p></div>
                    <div class="timeline-item"><div class="timeline-dot"></div><p>Mar 2026<br>Shipping</p></div>
                    <div class="timeline-item"><div class="timeline-dot"></div><p>Apr 2026<br>Spanish Lessons</p></div>
                    <div class="timeline-item"><div class="timeline-dot"></div><p>May 2026<br>Notify Landlord</p></div>
                    <div class="timeline-item"><div class="timeline-dot"></div><p>June 2026<br>Cancel Utilities</p></div>
                    <div class="timeline-item"><div class="timeline-dot"></div><p>July 1, 2026<br>Move Day</p></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Enhanced Weather Visualization -->
    <section id="weather" class="max-w-6xl mx-auto py-8 px-4">
        <div class="card fade-in">
            <h2 class="text-2xl font-bold text-[var(--primary)]"><i class="fas fa-cloud-sun mr-2"></i>Valencia Weather</h2>
            <div class="weather-visual">
                <i class="fas fa-sun weather-sun"></i>
                <i class="fas fa-cloud weather-cloud"></i>
                <div id="weather-info" class="text-white p-4 absolute bottom-0 left-0"></div>
            </div>
        </div>
    </section>

    <!-- Schools Carousel -->
    <section id="schools" class="max-w-6xl mx-auto py-8 px-4">
        <div class="card fade-in">
            <h2 class="text-2xl font-bold text-[var(--primary)]"><i class="fas fa-school mr-2"></i>Expat Schools</h2>
            <div class="splide mt-4" id="schools-carousel">
                <div class="splide__track">
                    <ul class="splide__list">
                        <!-- School Item 1 -->
                        <li class="splide__slide">
                            <div class="card cursor-pointer" onclick="showSchoolModal(1)">
                                <img src="https://images.unsplash.com/photo-1588072432836-e10032774350?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" alt="School" class="w-full h-48 object-cover rounded-t-lg">
                                <div class="p-4">
                                    <h3 class="font-bold text-lg">British School of Valencia</h3>
                                    <p class="text-sm mt-2">"Top-tier British education!" - Expat Parent</p>
                                    <p class="text-[var(--primary)] font-semibold mt-2">~$1,000/month</p>
                                    <button class="btn mt-4 w-full">Learn More</button>
                                </div>
                            </div>
                        </li>
                        <!-- School Item 2 -->
                        <li class="splide__slide">
                            <div class="card cursor-pointer" onclick="showSchoolModal(2)">
                                <img src="https://images.unsplash.com/photo-1523050854058-8df90110c9f1?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" alt="School" class="w-full h-48 object-cover rounded-t-lg">
                                <div class="p-4">
                                    <h3 class="font-bold text-lg">Caxton College</h3>
                                    <p class="text-sm mt-2">"Great bilingual program." - Expat Family</p>
                                    <p class="text-[var(--primary)] font-semibold mt-2">~$600/month</p>
                                    <button class="btn mt-4 w-full">Learn More</button>
                                </div>
                            </div>
                        </li>
                        <!-- School Item 3 -->
                        <li class="splide__slide">
                            <div class="card cursor-pointer" onclick="showSchoolModal(3)">
                                <img src="https://images.unsplash.com/photo-1606761568499-6d2451b23c66?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" alt="School" class="w-full h-48 object-cover rounded-t-lg">
                                <div class="p-4">
                                    <h3 class="font-bold text-lg">American School of Valencia</h3>
                                    <p class="text-sm mt-2">"US curriculum, excellent facilities." - Expat</p>
                                    <p class="text-[var(--primary)] font-semibold mt-2">~$1,200/month</p>
                                    <button class="btn mt-4 w-full">Learn More</button>
                                </div>
                            </div>
                        </li>
                        <!-- Additional school items would follow the same pattern -->
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Budget Tracker with Dynamic Addition -->
    <section id="budget" class="max-w-6xl mx-auto py-8 px-4">
        <div class="card fade-in">
            <h2 class="text-2xl font-bold text-[var(--primary)]"><i class="fas fa-wallet mr-2"></i>Budget Tracker</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
                <div id="budget-inputs">
                    <label class="block mt-3">Rent: <input type="number" data-label="Rent" value="1500" class="border p-2 rounded w-full budget-item mt-1"></label>
                    <label class="block mt-3">Groceries: <input type="number" data-label="Groceries" value="375" class="border p-2 rounded w-full budget-item mt-1"></label>
                    <label class="block mt-3">Utilities: <input type="number" data-label="Utilities" value="175" class="border p-2 rounded w-full budget-item mt-1"></label>
                    <label class="block mt-3">Transport: <input type="number" data-label="Transport" value="100" class="border p-2 rounded w-full budget-item mt-1"></label>
                    <label class="block mt-3">School: <input type="number" data-label="School" value="0" class="border p-2 rounded w-full budget-item mt-1"></label>
                    <label class="block mt-3">Insurance: <input type="number" data-label="Insurance" value="200" class="border p-2 rounded w-full budget-item mt-1"></label>
                    <label class="block mt-3">Entertainment: <input type="number" data-label="Entertainment" value="150" class="border p-2 rounded w-full budget-item mt-1"></label>
                    <label class="block mt-3">Add Income: <input type="number" id="addIncome" placeholder="Extra Income" class="border p-2 rounded w-full mt-1"></label>
                    <div class="mt-6">
                        <input type="text" id="newItemLabel" placeholder="New Item Name" class="border p-2 rounded w-2/3">
                        <button class="btn ml-2" onclick="addBudgetItem()">Add Item</button>
                    </div>
                    <button class="btn mt-6 w-full" onclick="updateBudget()">Update Budget</button>
                </div>
                <div>
                    <canvas id="budgetChart" class="max-w-full"></canvas>
                    <p class="mt-6 text-center font-semibold text-xl" id="savings">Savings: $3,500</p>
                    <p class="mt-2 text-center text-lg" id="total">Total: $2,500 / $6,000</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Animated To-Do List -->
    <section id="todo" class="max-w-6xl mx-auto py-8 px-4">
        <div class="card fade-in">
            <h2 class="text-2xl font-bold text-[var(--primary)]"><i class="fas fa-tasks mr-2"></i>Moving To-Do List</h2>
            <div id="todo-list" class="mt-4">
                <div class="todo-item" onclick="toggleTodo(this)"><i class="fas fa-check todo-check"></i>Research NLV Requirements (July 2025)</div>
                <div class="todo-item" onclick="toggleTodo(this)"><i class="fas fa-check todo-check"></i>Gather Income Proof ($3,000/month) (Sept 2025)</div>
                <div class="todo-item" onclick="toggleTodo(this)"><i class="fas fa-check todo-check"></i>Secure Private Health Insurance (Oct 2025)</div>
                <div class="todo-item" onclick="toggleTodo(this)"><i class="fas fa-check todo-check"></i>Open BBVA Bank Account (Nov 2025)</div>
                <div class="todo-item" onclick="toggleTodo(this)"><i class="fas fa-check todo-check"></i>Book Consulate Appointment for NLV (Dec 2025)</div>
                <div class="todo-item" onclick="toggleTodo(this)"><i class="fas fa-check todo-check"></i>Submit NLV Application (Jan 2026)</div>
                <div class="todo-item" onclick="toggleTodo(this)"><i class="fas fa-check todo-check"></i>Arrange Shipping or Furniture Purchase (Mar 2026)</div>
                <div class="todo-item" onclick="toggleTodo(this)"><i class="fas fa-check todo-check"></i>Research Spanish Lessons (Apr 2026)</div>
                <div class="todo-item" onclick="toggleTodo(this)"><i class="fas fa-check todo-check"></i>Notify Current Landlord of Move (May 2026)</div>
                <div class="todo-item" onclick="toggleTodo(this)"><i class="fas fa-check todo-check"></i>Cancel Current Utilities (June 2026)</div>
                <div class="todo-item" onclick="toggleTodo(this)"><i class="fas fa-check todo-check"></i>Pack Belongings (June 2026)</div>
                <div class="todo-item" onclick="toggleTodo(this)"><i class="fas fa-check todo-check"></i>Book Flights to Valencia (June 2026)</div>
                <div class="todo-item" onclick="toggleTodo(this)"><i class="fas fa-check todo-check"></i>Arrive in Valencia & Register for Padrón (July 2026)</div>
                <div class="todo-item" onclick="toggleTodo(this)"><i class="fas fa-check todo-check"></i>Apply for NIE (July 2026)</div>
            </div>
        </div>
    </section>

    <!-- Calendar -->
    <section id="calendar" class="max-w-6xl mx-auto py-8 px-4">
        <div class="card fade-in">
            <h2 class="text-2xl font-bold text-[var(--primary)]"><i class="fas fa-calendar mr-2"></i>Planning Calendar</h2>
            <div id="calendar-container" class="mt-4"></div>
        </div>
    </section>

    <!-- Interactive Map -->
    <section id="map" class="max-w-6xl mx-auto py-8 px-4">
        <div class="card fade-in">
            <h2 class="text-2xl font-bold text-[var(--primary)]"><i class="fas fa-map mr-2"></i>Valencia Map</h2>
            <div id="map" class="mt-4"></div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-[var(--dark)] text-white text-center p-6 mt-12">
        <p>© 2025 Our Valencia Journey</p>
    </footer>

    <!-- Rental Modal -->
    <div id="rental-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('rental-modal')">&times;</span>
            <div id="rental-modal-content">
                <!-- Content will be dynamically inserted here -->
            </div>
        </div>
    </div>

    <!-- School Modal -->
    <div id="school-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('school-modal')">&times;</span>
            <div id="school-modal-content">
                <!-- Content will be dynamically inserted here -->
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // Loader (2 seconds)
        window.addEventListener('load', () => {
            const loader = document.getElementById('loader');
            setTimeout(() => {
                loader.classList.add('fade-out');
                setTimeout(() => loader.style.display = 'none', 500);
            }, 2000);
        });

        // Fixed Countdown Timer
        function updateCountdown() {
            const moveDate = new Date("July 1, 2026 00:00:00").getTime();
            const now = new Date().getTime();
            const distance = moveDate - now;
            
            if (distance < 0) {
                document.getElementById("countdown-bar").innerHTML = "<div class='text-xl font-bold'>We've arrived in Valencia!</div>";
                return;
            }
            
            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);
            
            document.getElementById("days").textContent = days;
            document.getElementById("hours").textContent = hours;
            document.getElementById("minutes").textContent = minutes;
            document.getElementById("seconds").textContent = seconds;
        }
        
        // Update immediately and then every second
        updateCountdown();
        setInterval(updateCountdown, 1000);

        // Initialize carousels
        document.addEventListener('DOMContentLoaded', function() {
            // Rentals carousel
            new Splide('#rentals-carousel', {
                type: 'loop',
                perPage: 3,
                perMove: 1,
                gap: '1.5rem',
                breakpoints: {
                    1024: { perPage: 2 },
                    768: { perPage: 1 }
                },
                arrows: true,
                pagination: true
            }).mount();

            // Schools carousel
            new Splide('#schools-carousel', {
                type: 'loop',
                perPage: 3,
                perMove: 1,
                gap: '1.5rem',
                breakpoints: {
                    1024: { perPage: 2 },
                    768: { perPage: 1 }
                },
                arrows: true,
                pagination: true
            }).mount();
        });

        // Enhanced Weather Visualization with Metrics
        fetch('https://api.openweathermap.org/data/2.5/weather?q=Valencia,ES&appid=ee6c435a2eaea8e6f4e7ebfa1f2e2f3e&units=metric')
            .then(response => response.json())
            .then(data => {
                document.getElementById('weather-info').innerHTML = `
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <p class="text-xl font-bold">${data.main.temp}°C</p>
                            <p class="text-sm">${data.weather[0].description}</p>
                        </div>
                        <div>
                            <p class="text-sm"><i class="fas fa-temperature-high mr-1"></i> High: ${data.main.temp_max}°C</p>
                            <p class="text-sm"><i class="fas fa-temperature-low mr-1"></i> Low: ${data.main.temp_min}°C</p>
                            <p class="text-sm"><i class="fas fa-wind mr-1"></i> Wind: ${data.wind.speed} m/s</p>
                            <p class="text-sm"><i class="fas fa-tint mr-1"></i> Humidity: ${data.main.humidity}%</p>
                        </div>
                    </div>
                `;
            })
            .catch(error => {
                console.error('Weather fetch error:', error);
                document.getElementById('weather-info').innerHTML = `
                    <p>Weather data unavailable</p>
                    <p>Default Valencia climate:</p>
                    <p>Summer: 25-30°C, Winter: 8-16°C</p>
                `;
            });

        // Budget Tracker with Dynamic Addition
        const ctx = document.getElementById('budgetChart').getContext('2d');
        let budgetChart = new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ['Rent', 'Groceries', 'Utilities', 'Transport', 'School', 'Insurance', 'Entertainment', 'Savings'],
                datasets: [{
                    data: [1500, 375, 175, 100, 0, 200, 150, 3500],
                    backgroundColor: [
                        '#4A6FA5', '#F18F01', '#48A9A6', '#2B2D42', 
                        '#6D6875', '#B5838D', '#E5989B', '#FFCDB2'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                plugins: {
                    legend: {
                        position: 'right',
                    }
                },
                cutout: '65%'
            }
        });

        function addBudgetItem() {
            const label = document.getElementById('newItemLabel').value.trim();
            if (label) {
                const inputsDiv = document.getElementById('budget-inputs');
                const newInput = document.createElement('label');
                newInput.className = 'block mt-3';
                newInput.innerHTML = `${label}: <input type="number" data-label="${label}" value="0" class="border p-2 rounded w-full budget-item mt-1">`;
                
                // Insert before the "Add Income" field
                const addIncomeLabel = inputsDiv.querySelector('label[for="addIncome"]');
                inputsDiv.insertBefore(newInput, addIncomeLabel);
                
                document.getElementById('newItemLabel').value = '';
                updateBudget();
            }
        }

        function updateBudget() {
            const items = Array.from(document.getElementsByClassName('budget-item')).map(item => ({
                label: item.getAttribute('data-label'),
                value: parseInt(item.value) || 0
            }));
            
            const addIncome = parseInt(document.getElementById('addIncome').value) || 0;
            const totalExpenses = items.reduce((a, b) => a + b.value, 0);
            const totalBudget = 6000 + addIncome;
            const savings = Math.max(0, totalBudget - totalExpenses);
            
            document.getElementById('savings').textContent = `Savings: $${savings}`;
            document.getElementById('total').textContent = `Total: $${totalExpenses} / $${totalBudget}`;
            
            // Update chart
            budgetChart.data.labels = [...items.map(item => item.label), 'Savings'];
            budgetChart.data.datasets[0].data = [...items.map(item => item.value), savings];
            budgetChart.update();
        }

        // Animated To-Do List
        function toggleTodo(item) {
            item.classList.toggle('completed');
        }

        // Calendar with To-Do Events
        document.addEventListener('DOMContentLoaded', function() {
            const calendarEl = document.getElementById('calendar-container');
            const calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: 'dayGridMonth',
                initialDate: '2025-07-01',
                headerToolbar: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'dayGridMonth,timeGridWeek,timeGridDay'
                },
                editable: true,
                events: [
                    { title: 'Research NLV Requirements', start: '2025-07-01', color: 'var(--primary)' },
                    { title: 'Gather Income Proof', start: '2025-09-01', color: 'var(--accent)' },
                    { title: 'Secure Health Insurance', start: '2025-10-01', color: 'var(--primary)' },
                    { title: 'Open BBVA Account', start: '2025-11-01', color: 'var(--accent)' },
                    { title: 'Book Consulate Appointment', start: '2025-12-01', color: 'var(--primary)' },
                    { title: 'Submit NLV Application', start: '2026-01-01', color: 'var(--accent)' },
                    { title: 'Arrange Shipping/Furniture', start: '2026-03-01', color: 'var(--primary)' },
                    { title: 'Research Spanish Lessons', start: '2026-04-01', color: 'var(--accent)' },
                    { title: 'Notify Landlord', start: '2026-05-01', color: 'var(--primary)' },
                    { title: 'Cancel Utilities', start: '2026-06-01', color: 'var(--accent)' },
                    { title: 'Pack Belongings', start: '2026-06-15', color: 'var(--primary)' },
                    { title: 'Book Flights', start: '2026-06-20', color: 'var(--accent)' },
                    { title: 'Move to Valencia', start: '2026-07-01', color: 'var(--secondary)' },
                    { title: 'Register for Padrón', start: '2026-07-05', color: 'var(--primary)' },
                    { title: 'Apply for NIE', start: '2026-07-10', color: 'var(--accent)' }
                ],
                eventClick: function(info) {
                    alert('Task: ' + info.event.title + '\nDue: ' + info.event.start.toLocaleDateString());
                }
            });
            calendar.render();
        });

        // Map
        const map = L.map('map').setView([39.4699, -0.3763], 13);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { 
            attribution: '© OpenStreetMap contributors',
            maxZoom: 18 
        }).addTo(map);
        
        // Custom icons
        const homeIcon = L.divIcon({ 
            html: '<i class="fas fa-home" style="color: #F18F01; font-size: 24px;"></i>',
            className: 'map-icon'
        });
        
        const schoolIcon = L.divIcon({ 
            html: '<i class="fas fa-school" style="color: #4A6FA5; font-size: 24px;"></i>',
            className: 'map-icon'
        });
        
        const landmarkIcon = L.divIcon({ 
            html: '<i class="fas fa-landmark" style="color: #48A9A6; font-size: 24px;"></i>',
            className: 'map-icon'
        });
        
        // Markers
        L.marker([39.475, -0.35], { icon: homeIcon }).addTo(map)
            .bindPopup('<b>Malvarrosa</b><br>3-Bed Apartment<br>$1,500/month');
            
        L.marker([39.47, -0.34], { icon: homeIcon }).addTo(map)
            .bindPopup('<b>Cabanyal</b><br>2-Bed Apartment<br>$1,300/month');
            
        L.marker([39.48, -0.33], { icon: homeIcon }).addTo(map)
            .bindPopup('<b>Patacona</b><br>3-Bed Apartment<br>$1,700/month');
            
        L.marker([39.466, -0.375], { icon: schoolIcon }).addTo(map)
            .bindPopup('<b>British School of Valencia</b><br>International curriculum');
            
        L.marker([39.47, -0.38], { icon: schoolIcon }).addTo(map)
            .bindPopup('<b>Caxton College</b><br>Bilingual education');
            
        L.marker([39.455, -0.35], { icon: landmarkIcon }).addTo(map)
            .bindPopup('<b>City of Arts and Sciences</b><br>Famous Valencia landmark');

        // Modal functions
        function showRentalModal(id) {
            // In a real app, you would fetch this data from a database
            const rentals = {
                1: {
                    title: "3-Bed Apartment in Malvarrosa",
                    price: "$1,500/month",
                    image: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                    description: "Beautiful beachfront apartment with stunning Mediterranean views. Features a large balcony, modern kitchen, and spacious living area. Located just 50m from the beach.",
                    bedrooms: 3,
                    bathrooms: 2,
                    size: "120 m²",
                    amenities: ["Balcony", "Air Conditioning", "Parking", "Elevator", "Fully Equipped Kitchen"],
                    contact: "rentals@valenciaproperties.com"
                },
                2: {
                    title: "2-Bed Apartment in Cabanyal",
                    price: "$1,300/month",
                    image: "https://images.unsplash.com/photo-1568605114967-8130f3a36994?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                    description: "Traditional fisherman's quarter apartment, fully renovated with modern amenities while preserving its historic charm. Close to local markets and restaurants.",
                    bedrooms: 2,
                    bathrooms: 1,
                    size: "85 m²",
                    amenities: ["Terrace", "Air Conditioning", "Washer", "Historical Building"],
                    contact: "rentals@valenciaproperties.com"
                },
                3: {
                    title: "3-Bed Apartment in Patacona",
                    price: "$1,700/month",
                    image: "https://images.unsplash.com/photo-1513584684374-8bab748fbf7f?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                    description: "Spacious modern apartment near the beach with large windows for plenty of natural light. Community pool and garden area included.",
                    bedrooms: 3,
                    bathrooms: 2,
                    size: "110 m²",
                    amenities: ["Community Pool", "Garden", "Parking", "Modern Kitchen"],
                    contact: "rentals@valenciaproperties.com"
                }
            };

            const rental = rentals[id];
            if (!rental) return;

            document.getElementById('rental-modal-content').innerHTML = `
                <h2 class="text-2xl font-bold text-[var(--primary)]">${rental.title}</h2>
                <p class="text-xl text-[var(--secondary)] mt-2">${rental.price}</p>
                <img src="${rental.image}" alt="${rental.title}" class="w-full h-64 object-cover rounded-lg mt-4">
                <p class="mt-4">${rental.description}</p>
                <div class="grid grid-cols-2 gap-4 mt-6">
                    <div>
                        <h3 class="font-bold">Details</h3>
                        <p><i class="fas fa-bed mr-2"></i> Bedrooms: ${rental.bedrooms}</p>
                        <p><i class="fas fa-bath mr-2"></i> Bathrooms: ${rental.bathrooms}</p>
                        <p><i class="fas fa-ruler-combined mr-2"></i> Size: ${rental.size}</p>
                    </div>
                    <div>
                        <h3 class="font-bold">Amenities</h3>
                        <ul class="list-disc pl-5">
                            ${rental.amenities.map(amenity => `<li>${amenity}</li>`).join('')}
                        </ul>
                    </div>
                </div>
                <div class="mt-6">
                    <h3 class="font-bold">Contact</h3>
                    <p><i class="fas fa-envelope mr-2"></i> ${rental.contact}</p>
                    <button class="btn mt-4 w-full" onclick="alert('Contact form would open here')">
                        <i class="fas fa-paper-plane mr-2"></i> Contact Agent
                    </button>
                </div>
            `;

            document.getElementById('rental-modal').style.display = 'flex';
        }

        function showSchoolModal(id) {
            // In a real app, you would fetch this data from a database
            const schools = {
                1: {
                    name: "British School of Valencia",
                    type: "British International",
                    fees: "$1,000/month",
                    image: "https://images.unsplash.com/photo-1588072432836-e10032774350?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                    description: "Following the British curriculum, this school offers excellent academic standards with a wide range of extracurricular activities. All classes taught in English with Spanish as a second language.",
                    curriculum: "British National Curriculum",
                    languages: ["English", "Spanish", "Valencian"],
                    ages: "3-18 years",
                    website: "https://bsvalencia.com",
                    contact: "info@bsvalencia.com"
                },
                2: {
                    name: "Caxton College",
                    type: "Bilingual School",
                    fees: "$600/month",
                    image: "https://images.unsplash.com/photo-1523050854058-8df90110c9f1?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                    description: "Offering a bilingual education with a mix of British and Spanish curricula. Strong focus on both academic excellence and personal development.",
                    curriculum: "Mixed British/Spanish",
                    languages: ["English", "Spanish"],
                    ages: "1-18 years",
                    website: "https://caxtoncollege.com",
                    contact: "admissions@caxtoncollege.com"
                },
                3: {
                    name: "American School of Valencia",
                    type: "American International",
                    fees: "$1,200/month",
                    image: "https://images.unsplash.com/photo-1606761568499-6d2451b23c66?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                    description: "Following the American curriculum with Advanced Placement courses available for high school students. Modern facilities and diverse student body.",
                    curriculum: "American Curriculum",
                    languages: ["English", "Spanish"],
                    ages: "3-18 years",
                    website: "https://asvalencia.org",
                    contact: "admissions@asvalencia.org"
                }
            };

            const school = schools[id];
            if (!school) return;

            document.getElementById('school-modal-content').innerHTML = `
                <h2 class="text-2xl font-bold text-[var(--primary)]">${school.name}</h2>
                <p class="text-lg text-[var(--accent)] mt-1">${school.type}</p>
                <p class="text-xl text-[var(--secondary)] mt-2">${school.fees}</p>
                <img src="${school.image}" alt="${school.name}" class="w-full h-64 object-cover rounded-lg mt-4">
                <p class="mt-4">${school.description}</p>
                <div class="grid grid-cols-2 gap-4 mt-6">
                    <div>
                        <h3 class="font-bold">Curriculum</h3>
                        <p>${school.curriculum}</p>
                        <h3 class="font-bold mt-3">Languages</h3>
                        <p>${school.languages.join(', ')}</p>
                    </div>
                    <div>
                        <h3 class="font-bold">Age Range</h3>
                        <p>${school.ages}</p>
                        <h3 class="font-bold mt-3">Website</h3>
                        <a href="${school.website}" target="_blank" class="text-[var(--primary)] hover:text-[var(--secondary)]">${school.website}</a>
                    </div>
                </div>
                <div class="mt-6">
                    <h3 class="font-bold">Contact</h3>
                    <p><i class="fas fa-envelope mr-2"></i> ${school.contact}</p>
                    <button class="btn mt-4 w-full" onclick="alert('Admissions form would open here')">
                        <i class="fas fa-user-graduate mr-2"></i> Request Information
                    </button>
                </div>
            `;

            document.getElementById('school-modal').style.display = 'flex';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // Close modals when clicking outside content
        window.onclick = function(event) {
            if (event.target.className === 'modal') {
                event.target.style.display = 'none';
            }
        }
    </script>
</body>
</html>